â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“‹ LISTA 69B SAT - ÃNDICE FINAL                       â•‘
â•‘                 Sistema de Descarga y AutomatizaciÃ³n                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ¯ START HERE - COMIENZA AQUÃ                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

  OPCIÃ“N 1 (Recomendada - Bash):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  bash INSTALAR_LISTA_69B.sh

  OPCIÃ“N 2 (Python):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  python3 setup_lista69b_completo.py

  OPCIÃ“N 3 (Verificar estado):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  python3 verificar_lista69b.py

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ DOCUMENTACIÃ“N POR TIPO                                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

ğŸ“– DOCUMENTACIÃ“N TÃ‰CNICA:
  â”œâ”€â”€ LISTA_69B_COMPLETO.txt ................... ğŸ“‹ Este archivo (vista general)
  â”œâ”€â”€ LISTA_69B_AUTOMATIZACION.md ............. ğŸ“š DocumentaciÃ³n completa
  â”œâ”€â”€ LISTA_69B_RESUMEN.md .................... ğŸ“„ Resumen de implementaciÃ³n
  â””â”€â”€ LISTA_69B_QUICK_REFERENCE.txt ........... âš¡ Referencia rÃ¡pida

ğŸš€ GUÃAS DE INSTALACIÃ“N:
  â”œâ”€â”€ INSTALAR_LISTA_69B.sh ................... ğŸ”§ INSTALADOR PRINCIPAL
  â”œâ”€â”€ INSTALAR_LISTA_69B_README.md ............ ğŸ“Œ GuÃ­a de instalaciÃ³n rÃ¡pida
  â””â”€â”€ app/backend/scripts/README.md ........... ğŸ“‹ GuÃ­a de scripts

ğŸ”§ SCRIPTS PRINCIPALES:
  â”œâ”€â”€ setup_lista69b_completo.py .............. â­ Setup completo (Python)
  â”œâ”€â”€ verificar_lista69b.py ................... ğŸ” Verificador de estado
  â””â”€â”€ run_lista69b_setup.sh ................... ğŸš€ Setup + Cron (Bash)

ğŸ“Š SCRIPTS DE UTILIDAD:
  â”œâ”€â”€ app/backend/scripts/actualizar_lista_69b.py ... ğŸ“¥ Descargador
  â”œâ”€â”€ app/backend/scripts/test_lista_69b.py ......... ğŸ§ª Test rÃ¡pido
  â””â”€â”€ app/backend/scripts/ejemplo_lista_69b.py ...... ğŸ® Ejemplo interactivo

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“‹ FLUJO DE EJECUCIÃ“N                                                 â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

PASO 1ï¸âƒ£  - INSTALACIÃ“N
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  bash INSTALAR_LISTA_69B.sh
  
  Â¿QuÃ© hace?
  â””â”€ Instala dependencias (pandas, requests, beautifulsoup4, openpyxl)
  â””â”€ Descarga Lista 69B del SAT (primera vez)
  â””â”€ Configura cron para actualizaciÃ³n diaria 6am
  â””â”€ Muestra resumen y prÃ³ximos pasos

PASO 2ï¸âƒ£  - VERIFICACIÃ“N
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  python3 verificar_lista69b.py
  
  Â¿QuÃ© verifica?
  â””â”€ Scripts instalados
  â””â”€ Datos descargados
  â””â”€ Dependencias Python
  â””â”€ ConfiguraciÃ³n de cron
  â””â”€ IntegraciÃ³n con KYC

PASO 3ï¸âƒ£  - PRUEBAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Test rÃ¡pido
  python3 app/backend/scripts/test_lista_69b.py
  
  # Ejemplo interactivo (menÃº)
  python3 app/backend/scripts/ejemplo_lista_69b.py

PASO 4ï¸âƒ£  - OPERACIÃ“N NORMAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… El cron se ejecutarÃ¡ automÃ¡ticamente cada dÃ­a a las 6:00 AM
  âœ… Se descargarÃ¡n cambios de la lista automÃ¡ticamente
  âœ… El sistema KYC usarÃ¡ la lista actualizada

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ ARCHIVOS GENERADOS (despuÃ©s de ejecutar)                           â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

app/backend/data/lista_69b/
â”œâ”€â”€ lista_69b.json ..................... Lista completa en JSON
â”œâ”€â”€ lista_69b_rfcs.txt ................. Solo RFCs (1 por lÃ­nea)
â”œâ”€â”€ metadata.json ...................... Info de actualizaciÃ³n
â”œâ”€â”€ actualizacion.log .................. Historial de ejecuciones
â””â”€â”€ cron.log ........................... Log de ejecuciones automÃ¡ticas

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ’» COMANDOS ÃšTILES                                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

INSTALACIÃ“N:
  bash INSTALAR_LISTA_69B.sh            InstalaciÃ³n completa
  python3 setup_lista69b_completo.py    Setup en Python
  python3 verificar_lista69b.py         Verificar estado

ACTUALIZACIÃ“N MANUAL:
  python3 app/backend/scripts/actualizar_lista_69b.py

PRUEBAS:
  python3 app/backend/scripts/test_lista_69b.py
  python3 app/backend/scripts/ejemplo_lista_69b.py

INFORMACIÃ“N:
  cat app/backend/data/lista_69b/metadata.json      Ver estadÃ­sticas
  wc -l app/backend/data/lista_69b/lista_69b_rfcs.txt   Contar RFCs
  tail -f app/backend/data/lista_69b/actualizacion.log  Ver log

CRON:
  crontab -l                            Ver tareas programadas
  crontab -e                            Editar tareas
  crontab -l | grep actualizar_lista_69b Ver solo Lista 69B

DOCUMENTACIÃ“N:
  cat LISTA_69B_AUTOMATIZACION.md       Docs completa
  cat LISTA_69B_QUICK_REFERENCE.txt     Quick reference

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ”„ CRON AUTOMÃTICO                                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Se ejecuta automÃ¡ticamente DIARIAMENTE a las 6:00 AM UTC:

  0 6 * * * cd /ruta/app/backend/scripts && python3 actualizar_lista_69b.py

Ver cron actual:
  crontab -l | grep actualizar_lista_69b

Editar cron manualmente:
  crontab -e
  # Agregar la lÃ­nea de arriba si no estÃ¡

Ver logs de cron:
  tail -f app/backend/data/lista_69b/cron.log

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ› TROUBLESHOOTING                                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

âŒ Error: ModuleNotFoundError: pandas
   âœ… SoluciÃ³n: bash INSTALAR_LISTA_69B.sh

âŒ Error: Lista no disponible localmente
   âœ… SoluciÃ³n: python3 app/backend/scripts/actualizar_lista_69b.py

âŒ Error: No se encontraron enlaces de descarga
   âœ… SoluciÃ³n: Descargar manualmente desde https://www.sat.gob.mx/consulta/92764
              Colocar Excel en: app/backend/data/lista_69b/

âŒ Cron no se ejecutÃ³
   âœ… Verificar: crontab -l | grep actualizar_lista_69b
   âœ… Ver logs: tail -f app/backend/data/lista_69b/cron.log

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ”— INTEGRACIÃ“N CON KYC                                                â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Ya integrado automÃ¡ticamente en:

  Backend:
  â”œâ”€â”€ app/backend/api/kyc.py
  â”œâ”€â”€ app/backend/services/kyc_free_apis.py
  
  Frontend:
  â””â”€â”€ app/components/kyc/KYCModule.tsx

Usar desde cÃ³digo:
  from app.backend.services.kyc_free_apis import Lista69BService
  resultado = Lista69BService.buscar_rfc("ABC123456XYZ")

Usar desde API:
  POST /api/kyc/validar-listas-negras
  {
    "nombre": "Juan",
    "apellido_paterno": "PÃ©rez",
    "rfc": "PEGJ850515HD7"
  }

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ ESTRUCTURA TÃ‰CNICA                                                 â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

DESCARGADOR (actualizar_lista_69b.py):
  â””â”€ Conecta al SAT
  â””â”€ Obtiene URLs de Excel
  â””â”€ Descarga archivos
  â””â”€ Lee con pandas
  â””â”€ Valida RFCs
  â””â”€ Elimina duplicados
  â””â”€ Guarda JSON + TXT
  â””â”€ Genera metadata
  â””â”€ Logging completo

SERVICIO KYC (kyc_free_apis.py):
  â””â”€ Lee lista JSON
  â””â”€ Cache en memoria (1h)
  â””â”€ Busca RFC por nombre
  â””â”€ Retorna detalles
  â””â”€ Maneja errores

APIS (kyc.py):
  â””â”€ POST /api/kyc/validar-listas-negras
  â””â”€ Valida contra OFAC, CSNU, Lista 69B
  â””â”€ Retorna score de riesgo

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“Š CARACTERÃSTICAS                                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

âœ… Descarga automÃ¡tica desde SAT
âœ… ValidaciÃ³n de RFCs (12-13 caracteres)
âœ… EliminaciÃ³n de duplicados
âœ… Cache en memoria
âœ… Logging completo
âœ… Metadata con estadÃ­sticas
âœ… BÃºsqueda en JSON y TXT
âœ… IntegraciÃ³n con KYC
âœ… API REST lista
âœ… Cron automÃ¡tico diario
âœ… Instalador automatizado
âœ… Tests incluidos
âœ… DocumentaciÃ³n completa

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ INFORMACIÃ“N ÃšTIL                                                   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

VersiÃ³n: 1.0.0
Fecha: 2026-01-20
Framework: Python 3.x + FastAPI
LibrerÃ­as: pandas, requests, beautifulsoup4, openpyxl

Fuente oficial:
https://www.sat.gob.mx/consulta/92764/descarga-de-listados-completos

ArtÃ­culo 69-B CFF:
https://www.sat.gob.mx/normatividad/52966/conoce-la-lista-completa

DocumentaciÃ³n de TarantulaHawk:
- Repos: github.com/cruizviquez/tarantulahawk
- Docs: LISTA_69B_AUTOMATIZACION.md
- Code: app/backend/scripts/

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  ğŸ‰ SISTEMA LISTO PARA USAR                            â•‘
â•‘                                                                          â•‘
â•‘  Ejecuta ahora:  bash INSTALAR_LISTA_69B.sh                            â•‘
â•‘  Tu cron se ejecutarÃ¡ DIARIAMENTE a las 6:00 AM                         â•‘
â•‘                                                                          â•‘
â•‘  DocumentaciÃ³n: cat LISTA_69B_AUTOMATIZACION.md                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
